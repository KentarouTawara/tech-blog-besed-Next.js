---
title: 【Rails】findとfind_byと404エラーとnilと劇的な見せ方をされた知識って忘れそうにない、という話
date: "2021-01-08T00:43:10+09:00"
URL: https://kentarotawara.hatenablog.com/entry/2021/01/08/004310
EditURL: https://blog.hatena.ne.jp/KentaroTawara/kentarotawara.hatenablog.com/atom/entry/26006613675477742
---

こんにちは、たわらです。

Railsには似たようなクラスメソッドがあります。

`find`とか`find_by`とか。

で、その違いは何なのかなーと勉強していて、

RUNTEQというプログラミングスクールのコミュニティのSlackにて

「`find`と`find_by`って該当オブジェクトがない場合の挙動が違うんだ、、、」

と自分のTimesにつぶやいてみると、颯爽と先輩卒業生が現れて、、、

###  とある日

ボク「`find`と`find_by`って該当オブジェクトがない場合の挙動が違うんだ、、、」

先輩「`find`は例外起こす。`find_by`は`nil`を返す」

ボク「（なんて速さのレスなんだ、、、）」

ボク「んー、なるほどそうなんですね、、、」

【そして次の瞬間】

先輩「ほれ」

[![Image from Gyazo](https://i.gyazo.com/50972d6a45971986f8baad46ea559e31.png)](https://gyazo.com/50972d6a45971986f8baad46ea559e31)

先輩「なっ！」

先輩「んで、`ActiveRecord::RecordNotFound`はRailsでは`404`で処理するんじゃ」

ボク「な、なるほどー！」



[https://railsguides.jp/active_record_querying.html#find:embed:cite]



### 何かすごく頭に残る

このやりとりで`find`は例外で`find_by`は`nil`を返す、そしてその例外を404エラーで補足する、ということが頭にするするっと入りました。たぶん忘れないだろうな、と思いました。

なんでかなーと考えると、、、

<b>・びっくりしたから</b>

チャットでのやりとりだったので、急にコンソールの画像が出てきて反射的にびっくりしました。油断してたというか。

もうひとつ、わざわざ手元で実行してスクショまで取ってくれたんだ、ありがたい、というびっくりもありました。

<b>・実行前と実行後の結果がわかりやすい</b>

こうやって実行前のメソッドと実行結果をさくっと見せられると思わず納得してしまいますね。`find`は例外で`find_by`は`nil`なんだ、と。

<b>・アハ体験？</b>

例外補足についてはカリキュラムで学習したのですがそれほど理解できていませんでした。なんとなーくもやもやしたカタチで頭に残っていました。

その状態で、

「`ActiveRecord::RecordNotFound`はRailsでは`404`で処理するんじゃ」

と言われて頭のなかの知識の整理ができたように感じました。あ、そういうことだったのか！という喜びに似た感覚がありました。

<b>・抽象化できた</b>

これは未確認なので話半分ですが、

「`ActiveRecord::RecordNotFound`はRailsでは`404`で処理するんじゃ」

これって「特定のフレームワークは特定のエラーをHTTPステータスコードに結びつけている」ということですよね。たぶん。

なので、別のフレームワークは別の仕方で定義したエラーを、任意のHTTPステータスに紐づけている、ということだと予想できます。

フレームワークのエラーとHTTPステータスはフレームワーク固有の結びつきをしている、っぽいと１段階 抽象的に考えることができました。

おそらくこの４つくらいが重ね合わさって、「何かすごく頭に残る」と思ったのかなーと。

### 最後に

誰かと技術の話をするってこういういい感じのことが起きるんですね。恥ずかしがらずにコミュニケーションするって大事です。

ちなみに、この先輩は


[https://twitter.com/aiandrox:embed:cite]


の人です。気になる方はフォローしてみてください。

（了）






